<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Administrador</title>
</head>
<body style="background: #111; color: white; font-family: Arial; padding: 20px;">
  <h1>Agregar nuevo producto</h1>

  <input id="nombre" placeholder="Nombre" style="padding: 8px;" /><br><br>
  <input id="precio" placeholder="Precio" style="padding: 8px;" /><br><br>
  <input id="imagen" placeholder="Ruta de imagen (img/vape1.png)" style="padding: 8px;" /><br><br>

  <button onclick="agregarProducto()" style="padding: 10px 20px;">Agregar</button>

  <h2>Productos actuales</h2>
  <ul id="lista"></ul>

  <script>
    if (localStorage.getItem("admin") !== "true") {
      window.location.href = "login.html";
    }

    const lista = document.getElementById("lista");

    function renderProductos() {
      lista.innerHTML = "";
      const productos = JSON.parse(localStorage.getItem("productos")) || [];
      productos.forEach((p, i) => {
        lista.innerHTML += `<li>#${i+1} - ${p.nombre} (${p.precio})</li>`;
      });
    }

    function agregarProducto() {
      const nombre = document.getElementById("nombre").value;
      const precio = document.getElementById("precio").value;
      const imagen = document.getElementById("imagen").value;

      const nuevo = { nombre, precio, imagen };

      const productos = JSON.parse(localStorage.getItem("productos")) || [];
      productos.push(nuevo);
      localStorage.setItem("productos", JSON.stringify(productos));
      renderProductos();
    }

    renderProductos();
  </script>
</body>
</html>
